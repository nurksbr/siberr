'use client'

import React, { useState } from 'react'
import Navbar from '../../components/Navbar'
import Footer from '../../components/Footer'
import Link from 'next/link'

// Dosya ve uygulama örnekleri
const fileExamples = [
  {
    id: 1,
    name: 'YeniUygulama.exe',
    source: 'E-posta eki',
    description: 'Çalıştırıldığında dosyaları şifreleyen ve fidye notu bırakan bir uygulama.',
    indicators: ['İmzasız uygulama', 'E-posta ekinden gelen çalıştırılabilir dosya', 'Alışılmadık kaynak adresi', 'Aciliyet içeren e-posta metni'],
    category: 'malicious', // zararlı
    explanation: 'Bu, bir fidye yazılımıdır (ransomware). Kullanıcının dosyalarını şifreleyerek erişilemez hale getirir ve şifreleri çözmek için fidye talep eder.'
  },
  {
    id: 2,
    name: 'Microsoft_Word_Update.docm',
    source: 'Web sitesi indirme',
    description: 'Microsoft Word güncellemesi olarak tanıtılan, makrolar içeren bir belge.',
    indicators: ['Makrolar içeren belge', 'Sahte Microsoft etiketi', 'Güvenilmeyen bir kaynaktan indirilen belge', 'Makroları etkinleştirme talebi'],
    category: 'malicious', // zararlı
    explanation: 'Bu, makro tabanlı bir zararlı yazılımdır. Belge açıldığında makroların etkinleştirilmesini ister ve etkinleştirildiğinde zararlı kod çalıştırır.'
  },
  {
    id: 3,
    name: 'SistemOptimizasyonu.zip',
    source: 'Reklam banneri',
    description: 'Bilgisayarınızı hızlandırdığını iddia eden, kaynağı belirsiz bir program.',
    indicators: ['Şüpheli reklam kaynağı', 'Aşırı iyi performans vaatleri', 'Gereksiz sistem izinleri isteme', 'Uyarı tetikleyen kurucu'],
    category: 'suspicious', // şüpheli
    explanation: 'Bu, potansiyel olarak istenmeyen bir program (PUP) veya adware olabilir. Kullanıcılara fayda sağlama vaadiyle yüklenen ancak genellikle reklam gösterme, tarayıcı ayarlarını değiştirme gibi istenmeyen davranışlarda bulunan yazılımlardır.'
  },
  {
    id: 4,
    name: 'FinansRaporu_2024.xlsx',
    source: 'İş e-postası',
    description: 'Çalışma arkadaşınızdan gelen, 2024 yılına ait finansal raporları içeren Excel dosyası.',
    indicators: ['Tanıdık bir kaynaktan gelme', 'Normal iş içeriği', 'Beklenen bir dosya türü', 'Şirket bilgisayarında açılması gerekli'],
    category: 'safe', // güvenli
    explanation: 'Bu, normal bir iş dosyasıdır. Tanıdık bir kaynaktan gelmiştir ve içeriği beklenen türdedir.'
  },
  {
    id: 5,
    name: 'FreePremiumVersion.apk',
    source: 'Alternatif uygulama mağazası',
    description: 'Popüler bir uygulamanın ücretli versiyonunu ücretsiz sunan bir Android paketi.',
    indicators: ['Resmi olmayan kaynak', 'Ücretli içeriğin ücretsiz sunulması', 'Normal şartlarda erişilemeyen özellikler', 'Ekstra izinler talep etme'],
    category: 'malicious', // zararlı
    explanation: 'Bu, kırılmış bir uygulama gibi görünen ama aslında trojen içeren zararlı bir yazılımdır. Kullanıcıyı ücretsiz içerikle çekip, cihazda zararlı kod çalıştırır.'
  },
  {
    id: 6,
    name: 'CozumMerkezi.msi',
    source: 'Teknik destek e-postası',
    description: 'BT departmanından geldiği iddia edilen bir uzak destek aracı kurulum dosyası.',
    indicators: ['İstenmeyen e-posta', 'Acil kurulum talebi', 'Uzak erişim izni isteme', 'Şirket süreçlerine aykırı dağıtım'],
    category: 'malicious', // zararlı
    explanation: 'Bu, bir uzak erişim trojanıdır (RAT). Kurulduğunda saldırganın bilgisayarınıza uzaktan erişmesine ve kontrolü ele geçirmesine olanak tanır.'
  },
  {
    id: 7,
    name: 'UcretsizFilm2024.mp4.exe',
    source: 'Torrent sitesi',
    description: 'Yeni çıkan bir filmin korsanlanmış kopyası olarak tanıtılan, ancak .exe uzantılı bir dosya.',
    indicators: ['Yanlış dosya uzantısı (.mp4.exe)', 'Korsan içerik kaynağı', 'Gizlenmiş çalıştırılabilir uzantı', 'Çok yeni ve popüler içerik vaadi'],
    category: 'malicious', // zararlı
    explanation: 'Bu, kendisini bir video dosyası olarak gösteren bir trojen atıdır. Kullanıcı film izlemek isterken, aslında zararlı bir program çalıştırmış olur.'
  },
  {
    id: 8,
    name: 'TarayıcıGüncellemesi.js',
    source: 'Pop-up bildirimi',
    description: 'Bir web sitesinde gezinirken, tarayıcınızın eski olduğunu ve güncellenmesi gerektiğini iddia eden bir bildirimden indirilen JavaScript dosyası.',
    indicators: ['Güvenilmeyen kaynak', 'İstenmeyen pop-up bildirimi', 'Sahte güncelleme talebi', 'JavaScript dosyası indirme denemesi'],
    category: 'suspicious', // şüpheli
    explanation: 'Bu, potansiyel olarak tehlikeli bir JavaScript dosyasıdır. Pop-up bildirimler aracılığıyla indirilen dosyalar, çoğunlukla kötü amaçlı kodlar içerir veya kimlik avı (phishing) amaçlıdır.'
  },
  {
    id: 9,
    name: 'Sunum_Taslak.pptx',
    source: 'İş e-postası',
    description: 'İş arkadaşınızdan gelen bir PowerPoint sunumu.',
    indicators: ['Bilinen gönderici', 'Beklenen dosya türü', 'Normal e-posta içeriği', 'İş akışıyla alakalı'],
    category: 'safe', // güvenli
    explanation: 'Bu, güvenli bir PowerPoint dosyasıdır. Beklenen bir kaynaktan gelen, normal iş akışının parçası olan bir dosyadır.'
  },
  {
    id: 10,
    name: 'Fatura_PDF.js',
    source: 'Tanımadığınız bir şirketten e-posta',
    description: 'Ödenmemiş bir faturaya ait olduğu iddia edilen, JavaScript formatında bir dosya.',
    indicators: ['Beklenmeyen dosya formatı', 'Tanınmayan gönderen', 'Duygusal manipülasyon (ödenmemiş fatura)', 'Yanlış uzantı kullanımı (PDF yerine JS)'],
    category: 'malicious', // zararlı
    explanation: 'Bu, kendisini fatura gibi gösteren zararlı bir JavaScript dosyasıdır. Çalıştırıldığında zararlı kod yürütebilir veya bilgi çalabilir.'
  },
  {
    id: 11,
    name: 'AntivirusPro2024.dmg',
    source: 'Reklam e-postası',
    description: 'Ücretsiz bir antivirus programı olarak tanıtılan, MacOS için kurulum paketi.',
    indicators: ['İstenmeyen reklam e-postası', 'Bedava antivirus vaadi', 'Güvenilmeyen kaynak', 'Gereksiz sistem izinleri isteme'],
    category: 'suspicious', // şüpheli
    explanation: 'Bu, potansiyel olarak sahte bir antivirus programı olabilir. Bu tür yazılımlar, genellikle gerçek bir koruma sağlamadan kullanıcıları sahte tehditlere karşı uyarır ve para talep eder.'
  },
  {
    id: 12,
    name: 'KariyerBaşvuruFormu.pdf',
    source: 'Kariyer sitesi',
    description: 'Başvurduğunuz bir iş için indirdiğiniz PDF formatında bir başvuru formu.',
    indicators: ['Beklenen içerik türü', 'Güvenilir bir web sitesinden indirme', 'Bilinen dosya formatı', 'İş başvurusuyla alakalı'],
    category: 'safe', // güvenli
    explanation: 'Bu, güvenli bir PDF dosyasıdır. Güvenilir bir kaynaktan indirilmiştir ve beklenen içerik türüne sahiptir.'
  }
]

export default function MalwareDetectionPage() {
  const [selectedFiles, setSelectedFiles] = useState<Record<number, string | null>>({})
  const [showResults, setShowResults] = useState(false)
  const [score, setScore] = useState(0)
  const [showFeedback, setShowFeedback] = useState<Record<number, boolean>>({})

  // Kullanıcının seçtiği kategoriyi güncelle
  const handleCategorySelect = (fileId: number, category: string) => {
    setSelectedFiles({
      ...selectedFiles,
      [fileId]: category
    })
  }

  // Sonuçları değerlendir
  const evaluateResults = () => {
    let correctAnswers = 0
    
    fileExamples.forEach(file => {
      if (selectedFiles[file.id] === file.category) {
        correctAnswers++
      }
    })
    
    setScore(correctAnswers)
    setShowResults(true)
  }

  // Dosyanın geri bildirimini aç/kapa
  const toggleFeedback = (fileId: number) => {
    setShowFeedback({
      ...showFeedback,
      [fileId]: !showFeedback[fileId]
    })
  }

  // Testi sıfırla
  const resetTest = () => {
    setSelectedFiles({})
    setShowResults(false)
    setScore(0)
    setShowFeedback({})
    window.scrollTo(0, 0)
  }

  return (
    <>
      <Navbar />
      
      <main className="bg-gray-900 min-h-screen">
        {/* Hero Section */}
        <section className="relative py-16 bg-gray-900">
          <div className="absolute inset-0 z-0 opacity-20">
            <div className="absolute -top-1/4 -right-1/4 h-96 w-96 rounded-full bg-cyan-600 blur-3xl"></div>
          </div>
          
          <div className="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="text-center">
              <h1 className="text-4xl font-extrabold tracking-tight text-white sm:text-5xl md:text-6xl">
                <span className="block">Zararlı Yazılım</span>
                <span className="block text-cyan-400">Tespit Alıştırması</span>
              </h1>
              <p className="mt-6 max-w-3xl mx-auto text-xl text-gray-300">
                Zararlı yazılımları ve şüpheli dosyaları tanıma becerilerinizi test edin ve geliştirin
              </p>
            </div>
          </div>
        </section>
        
        {/* Alıştırma Açıklaması */}
        <section className="py-12 bg-gray-800">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="bg-gray-900 rounded-xl p-8 border border-gray-700 shadow-xl mb-10">
              <h2 className="text-2xl font-bold text-cyan-400 mb-4">Alıştırma Hakkında</h2>
              <p className="text-gray-300 mb-6">
                Bu alıştırmada, çeşitli dosya ve uygulamaları inceleyerek hangilerinin güvenli, şüpheli veya zararlı olduğunu belirlemeniz gerekmektedir. Her dosya için verilen bilgileri dikkatlice okuyun, risk göstergelerine dikkat edin ve bunlara dayanarak en uygun kategoriyi seçin.
              </p>
              
              <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div className="bg-gray-800 p-4 rounded-lg border border-green-700">
                  <h3 className="text-lg font-semibold text-green-400 mb-2">Güvenli</h3>
                  <p className="text-gray-300 text-sm">
                    Bilinen, güvenilir bir kaynaktan gelen ve normal davranış gösteren dosyalar.
                  </p>
                </div>
                
                <div className="bg-gray-800 p-4 rounded-lg border border-yellow-600">
                  <h3 className="text-lg font-semibold text-yellow-400 mb-2">Şüpheli</h3>
                  <p className="text-gray-300 text-sm">
                    Zararlı olmayabilir, ancak güvenlik riski oluşturabilecek, dikkatle yaklaşılması gereken dosyalar.
                  </p>
                </div>
                
                <div className="bg-gray-800 p-4 rounded-lg border border-red-700">
                  <h3 className="text-lg font-semibold text-red-400 mb-2">Zararlı</h3>
                  <p className="text-gray-300 text-sm">
                    Bilgisayara veya verilere zarar verme, bilgi çalma veya güvenliği ihlal etme potansiyeli yüksek dosyalar.
                  </p>
                </div>
              </div>
              
              <div className="bg-cyan-900 bg-opacity-30 p-4 rounded-lg border border-cyan-700">
                <h3 className="text-lg font-semibold text-cyan-400 mb-2">İpucu</h3>
                <p className="text-gray-300">
                  Dosyaları değerlendirirken şu faktörlere dikkat edin: Dosyanın kaynağı, dosya uzantısı, dosyanın talep ettiği izinler, beklenmeyen davranışlar ve dosya açıklamasındaki risk göstergeleri.
                </p>
              </div>
            </div>
            
            {/* Dosya Değerlendirme Listesi */}
            <div className="space-y-6 mb-10">
              {fileExamples.map(file => (
                <div key={file.id} className="bg-gray-900 rounded-xl p-6 border border-gray-700 shadow-lg">
                  <div className="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                    <div>
                      <h3 className="text-xl font-bold text-white">
                        {file.name}
                      </h3>
                      <p className="text-gray-400 text-sm mt-1">
                        <span className="font-semibold">Kaynak:</span> {file.source}
                      </p>
                    </div>
                    
                    {showResults && (
                      <div className={`mt-2 md:mt-0 px-3 py-1 rounded-full text-sm font-medium 
                        ${selectedFiles[file.id] === file.category 
                          ? 'bg-green-900 text-green-200' 
                          : 'bg-red-900 text-red-200'}`}
                      >
                        {selectedFiles[file.id] === file.category ? 'Doğru' : 'Yanlış'}
                      </div>
                    )}
                  </div>
                  
                  <p className="text-gray-300 mb-4">
                    {file.description}
                  </p>
                  
                  <div className="mb-4">
                    <h4 className="text-white font-semibold mb-2">Risk Göstergeleri:</h4>
                    <ul className="list-disc pl-5 space-y-1">
                      {file.indicators.map((indicator, index) => (
                        <li key={index} className="text-gray-300 text-sm">{indicator}</li>
                      ))}
                    </ul>
                  </div>
                  
                  {/* Kategori Seçimi */}
                  {!showResults ? (
                    <div className="flex flex-wrap gap-2 mt-4">
                      <button
                        onClick={() => handleCategorySelect(file.id, 'safe')}
                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors 
                          ${selectedFiles[file.id] === 'safe' 
                            ? 'bg-green-600 text-white' 
                            : 'bg-gray-700 text-gray-300 hover:bg-green-700'}`}
                      >
                        Güvenli
                      </button>
                      <button
                        onClick={() => handleCategorySelect(file.id, 'suspicious')}
                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors 
                          ${selectedFiles[file.id] === 'suspicious' 
                            ? 'bg-yellow-600 text-white' 
                            : 'bg-gray-700 text-gray-300 hover:bg-yellow-700'}`}
                      >
                        Şüpheli
                      </button>
                      <button
                        onClick={() => handleCategorySelect(file.id, 'malicious')}
                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors 
                          ${selectedFiles[file.id] === 'malicious' 
                            ? 'bg-red-600 text-white' 
                            : 'bg-gray-700 text-gray-300 hover:bg-red-700'}`}
                      >
                        Zararlı
                      </button>
                    </div>
                  ) : (
                    <div className="mt-4">
                      <div className="flex items-center space-x-2">
                        <div className={`px-3 py-1 rounded-lg text-sm font-medium
                          ${file.category === 'safe' 
                            ? 'bg-green-600 text-white' 
                            : file.category === 'suspicious' 
                              ? 'bg-yellow-600 text-white' 
                              : 'bg-red-600 text-white'}`}
                        >
                          {file.category === 'safe' 
                            ? 'Güvenli' 
                            : file.category === 'suspicious' 
                              ? 'Şüpheli' 
                              : 'Zararlı'}
                        </div>
                        <button
                          onClick={() => toggleFeedback(file.id)}
                          className="text-cyan-400 hover:text-cyan-300 text-sm underline focus:outline-none"
                        >
                          {showFeedback[file.id] ? 'Açıklamayı Gizle' : 'Açıklama Göster'}
                        </button>
                      </div>
                      
                      {showFeedback[file.id] && (
                        <div className="mt-3 bg-gray-800 p-4 rounded-lg border border-gray-700">
                          <p className="text-gray-300">{file.explanation}</p>
                        </div>
                      )}
                    </div>
                  )}
                </div>
              ))}
            </div>
            
            {/* Değerlendirme Butonu */}
            {!showResults ? (
              <div className="flex justify-center">
                <button
                  onClick={evaluateResults}
                  disabled={Object.keys(selectedFiles).length < fileExamples.length}
                  className={`px-8 py-3 rounded-lg font-medium text-white transition-colors
                    ${Object.keys(selectedFiles).length === fileExamples.length 
                      ? 'bg-cyan-600 hover:bg-cyan-700' 
                      : 'bg-gray-600 cursor-not-allowed'}`}
                >
                  {Object.keys(selectedFiles).length === fileExamples.length 
                    ? 'Cevapları Değerlendir' 
                    : `Devam etmek için ${fileExamples.length - Object.keys(selectedFiles).length} dosya daha sınıflandırın`}
                </button>
              </div>
            ) : (
              <div className="flex flex-col items-center">
                <div className="mb-6 bg-gray-800 p-6 rounded-xl border border-gray-700 w-full max-w-xl">
                  <h3 className="text-2xl font-bold text-white text-center mb-2">Sonuçlar</h3>
                  <div className="flex justify-center items-center my-4">
                    <div className="text-5xl font-bold text-white">{score}</div>
                    <div className="text-gray-400 ml-2">/ {fileExamples.length}</div>
                  </div>
                  
                  <div className="w-full bg-gray-700 rounded-full h-4 mb-4">
                    <div 
                      className={`h-4 rounded-full transition-all duration-500 ${
                        (score / fileExamples.length) > 0.8 
                          ? 'bg-green-500' 
                          : (score / fileExamples.length) > 0.6 
                            ? 'bg-yellow-500' 
                            : 'bg-red-500'
                      }`}
                      style={{ width: `${(score / fileExamples.length) * 100}%` }}
                    ></div>
                  </div>
                  
                  <p className="text-gray-300 text-center">
                    {(score / fileExamples.length) > 0.8 
                      ? 'Mükemmel! Zararlı yazılımları tespit etmekte çok iyisiniz.' 
                      : (score / fileExamples.length) > 0.6 
                        ? 'İyi iş! Ancak daha dikkatli olmanız gereken durumlar var.' 
                        : 'Daha fazla pratik yapmanız gerekiyor. Her dosyaya ait açıklamaları okuyarak bilginizi artırabilirsiniz.'}
                  </p>
                </div>
                
                <button
                  onClick={resetTest}
                  className="px-8 py-3 rounded-lg font-medium text-white bg-cyan-600 hover:bg-cyan-700 transition-colors"
                >
                  Testi Tekrar Başlat
                </button>
              </div>
            )}
            
            {/* Diğer Güvenlik Eğitimlerine Linkler */}
            <div className="mt-16">
              <h3 className="text-xl font-bold text-white mb-6">Diğer Güvenlik Alıştırmaları</h3>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                <Link href="/egitimler/sosyal-muhendislik" className="block">
                  <div className="bg-gray-800 rounded-lg p-6 border border-gray-700 hover:border-cyan-500 transition-all transform hover:-translate-y-1 hover:shadow-lg">
                    <div className="text-cyan-400 mb-3">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                      </svg>
                    </div>
                    <h4 className="text-lg font-bold text-white mb-2">Sosyal Mühendislik</h4>
                    <p className="text-gray-300">Sosyal mühendislik tekniklerini tanıma ve savunma yöntemlerini öğrenin.</p>
                  </div>
                </Link>
                
                <Link href="/egitimler/password-checker" className="block">
                  <div className="bg-gray-800 rounded-lg p-6 border border-gray-700 hover:border-cyan-500 transition-all transform hover:-translate-y-1 hover:shadow-lg">
                    <div className="text-cyan-400 mb-3">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                      </svg>
                    </div>
                    <h4 className="text-lg font-bold text-white mb-2">Şifre Güvenliği</h4>
                    <p className="text-gray-300">Şifrelerinizin ne kadar güvenli olduğunu test edin ve güçlü şifreler oluşturmayı öğrenin.</p>
                  </div>
                </Link>
                
                <Link href="/egitimler/data-leakage" className="block">
                  <div className="bg-gray-800 rounded-lg p-6 border border-gray-700 hover:border-cyan-500 transition-all transform hover:-translate-y-1 hover:shadow-lg">
                    <div className="text-cyan-400 mb-3">
                      <svg xmlns="http://www.w3.org/2000/svg" className="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                      </svg>
                    </div>
                    <h4 className="text-lg font-bold text-white mb-2">Veri Sızıntısı Riski</h4>
                    <p className="text-gray-300">Ofis ortamındaki potansiyel veri sızıntısı risklerini nasıl tespit edeceğinizi öğrenin.</p>
                  </div>
                </Link>
              </div>
            </div>
          </div>
        </section>
      </main>
      
      <Footer />
    </>
  )
} 